{% extends "base_with_tailwind.html" %}
{% block content %}
<div class="max-w-6xl mx-auto mt-10 px-4">
    <h2 class="text-2xl font-bold mb-6 text-gray-800">📌 Congregation 선택</h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        {% for congregation in congregations %}
        <a href="/manager/congregation/{{ congregation.id }}/territories/" 
        class="block p-6 rounded-xl shadow hover:shadow-lg transition-all hover:border-blue-400
          {% if congregation.service_coverage < 50 or congregation.old_territory_count > 100 %}
            bg-red-100 border border-red-300
          {% else %}
            bg-white border
          {% endif %}">
          
          <div class="text-xl font-semibold 
            {% if congregation.service_coverage < 50 or congregation.old_territory_count > 100 %}
              text-red-700
            {% else %}
              text-blue-800
            {% endif %}">
            {{ congregation.num }} {{ congregation.name }}
          </div>

          <div class="mt-1 text-sm text-gray-500">번호: {{ congregation.num }}</div>
          <div class="text-sm 
            {% if congregation.old_territory_count > 100 %}
              text-red-600 font-semibold
            {% else %}
              text-gray-500
            {% endif %}">
            두달이상 방문하지 않은 구역 수: {{ congregation.old_territory_count }}
          </div>
          <div class="text-sm text-gray-500">전체 구역 수: {{ congregation.total_territory_count }}</div>
          <div class="text-sm 
            {% if congregation.service_coverage < 50 %}
              text-red-600 font-semibold
            {% else %}
              text-gray-500
            {% endif %}">
            방문비: {{ congregation.service_coverage }} %
          </div>
        </a>
        {% endfor %}
    </div>
</div>
{% endblock %}
